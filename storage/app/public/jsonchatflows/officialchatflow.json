{
  "name": "Testing ChatFlow Json",
  "variables": {
    "tiposResiduos": {
      "0": "Metales",
      "1": "Carton",
      "2": "Plásticos",
      "3": "Aceite",
      "4": "Escombros",
      "5": "Textiles",
      "6": "Latas",
      "8": "Botellas PET",
      "9": "Papel",
      "10": "Envases Tetrapak"
    },
    "puntosLimpios":[
      {
        "nombre":"punto1",
        "calle":"null",
        "numero":"null",
        "latitud":"-36,781836",
        "longitud":"-73,074929",
        "residuos":"Plasticos, Aceite",
        "administracion":"Municipalidad Concepción",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "lat: -36,781836 , lon: -73,074929",
          "description": "Plasticos, Aceite",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto2",
        "calle":"null",
        "numero":"null",
        "latitud":"-36,781836",
        "longitud":"-73,074929",
        "residuos":"Escombros, Textiles, Metales",
        "administracion":"Sodimac",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "lat: -36,781836 , lon: -73,074929",
          "description": "Escombros, Textiles, Metales, administrado por sodimac",
          "position": {
              "left": 50,
              "top": 50
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto3",
        "calle":"Victor Lamas",
        "numero":"567",
        "latitud":"-36,8328",
        "longitud":"-73,0476",
        "residuos":"Papel, Carton, Latas, Botellas",
        "administracion":"Municipalidad Concepcion",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Victor Lamas 567",
          "description": "Papel, Carton, Latas, Botellas",
          "position": {
              "left": 100,
              "top": 50
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto4",
        "calle":"Av.Collao ",
        "numero":"1202 casilla 5-C",
        "latitud":"-36,81115",
        "longitud":"-73,01583",
        "residuos":"Papel, Carton, Latas, Botellas PET",
        "administracion":"Municipalidad Concepcion",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Av.Collao 1202 casilla 5-C",
          "description": "Papel, Carton, Latas, Botellas PET",
          "position": {
              "left": 60,
              "top": 60
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto5",
        "calle":"Av. Los Carrera",
        "numero":"301",
        "latitud":"-36,80494",
        "longitud":"-73,06167",
        "residuos":"Papel, Carton, Botellas PET, Latas, Envases Tetrapak",
        "administracion":"Sodimac",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Av. Los Carrera 301",
          "description": "Papel, Carton, Botellas PET, Latas, Envases Tetrapak",
          "position": {
              "left": 55,
              "top": 60
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto6",
        "calle":"Victor Lamas",
        "numero":"1290 casilla 160-C",
        "latitud":"-36,82925",
        "longitud":"-73,03429",
        "residuos":"Latas, Plasticos, Papel",
        "administracion":"Universidad de Concepcion",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Victor Lamas 1290 casilla 160-C",
          "description": "Latas, Plasticos, Papel",
          "position": {
              "left": 70,
              "top": 70
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto7",
        "calle":"Arturo Prat",
        "numero":"879",
        "latitud":"-36,82603",
        "longitud":"-73,06154",
        "residuos":"Latas, Plasticos, Papel",
        "administracion":"Universidad  Santo Tomas",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Arturo Prat 879",
          "description": "Latas, Plasticos, Papel",
          "position": {
              "left": 90,
              "top": 80
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto8",
        "calle":"Av. Los Carrera",
        "numero":"301",
        "latitud":"-36,82872",
        "longitud":"-73,06361",
        "residuos":"Papel, Carton, Botellas PET, Latas, Envases Tetrapak",
        "administracion":"Tottus",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Av. Los Carrera 301",
          "description": "Papel, Carton, Botellas PET, Latas, Envases Tetrapak",
          "position": {
              "left": 80,
              "top": 90
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto9",
        "calle":"Av. Costanera Andalien",
        "numero":"336",
        "latitud":"-36,77542",
        "longitud":"-73,04407",
        "residuos":"Papel, Carton, Botellas, Vidrio, Aceite",
        "administracion":"Municipalidad de Concepcion",
        "comuna": "Concepcion",
        "itemImg": {
          "type": "text",
          "title": "Av. Costanera Andalien 336",
          "description": "Papel, Carton, Botellas, Vidrio, Aceite",
          "position": {
              "left": 200,
              "top": 200
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto10",
        "calle":"Av. Ejercito",
        "numero":"330",
        "latitud":"-36,77611",
        "longitud":"-73,08949",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Av. Ejercito 330",
          "description": "Botellas PET",
          "position": {
              "left": 120,
              "top": 110
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto11",
        "calle":"Las Hortensias",
        "numero":"4850",
        "latitud":"-36,7556",
        "longitud":"-73,09271",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Las Hortensias 4850",
          "description": "Botellas PET",
          "position": {
              "left": 100,
              "top": 50
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto12",
        "calle":"Las Garzas",
        "numero":"193",
        "latitud":"-36,72049",
        "longitud":"-73,14115",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Las Garzas 193",
          "description": "Botellas PET",
          "position": {
              "left": 50,
              "top": 50
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto13",
        "calle":"28 de octubre",
        "numero":"205",
        "latitud":"-36,71104",
        "longitud":"-73,11824",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "28 de octubre 205",
          "description": "Botellas PET",
          "position": {
              "left": 60,
              "top": 60
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto14",
        "calle":"Almte. Neff ",
        "numero":"270",
        "latitud":"-36,74669",
        "longitud":"-73,09157",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Almte. Neff 270",
          "description": "Botellas PET",
          "position": {
              "left": 80,
              "top": 80
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto15",
        "calle":"Desiderio Garcia",
        "numero":"979",
        "latitud":"-36,75158",
        "longitud":"-73,10564",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Desiderio Garcia 979",
          "description": "Botellas PET",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto16",
        "calle":"Av. Colón",
        "numero":"3260",
        "latitud":"-36,74265",
        "longitud":"-73,09816",
        "residuos":"Botellas PET",
        "administracion":"null",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Av. Colón 3260",
          "description": "Botellas PET",
          "position": {
              "left": 40,
              "top": 40
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto17",
        "calle":"Sgto. Aldea",
        "numero":"121",
        "latitud":"-36,71406",
        "longitud":"-73,11611",
        "residuos":"Botellas PET",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "Sgto. Aldea 121",
          "description": "Botellas PET",
          "position": {
              "left": 150,
              "top": 150
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto18",
        "calle":"A",
        "numero":"909",
        "latitud":"-36,77664",
        "longitud":"-73,07323",
        "residuos":"Botellas PET, Papel, Carton, Aceite vegetal",
        "administracion":"Municipalidad Talcahuano",
        "comuna":"Talcahuano",
        "itemImg": {
          "type": "text",
          "title": "A 909",
          "description": "Botellas PET, Papel, Carton, Aceite vegetal",
          "position": {
              "left": 160,
              "top": 50
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto19",
        "calle":"Colo colo",
        "numero":"249",
        "latitud":"-36,83774",
        "longitud":"-73,09316",
        "residuos":"Latas, Papeles, Carton",
        "administracion":"Municipalidad San pedro de la paz",
        "comuna":"San Pedro",
        "itemImg": {
          "type": "text",
          "title": "Colo colo 249",
          "description": "Latas, Papeles, Carton",
          "position": {
              "left": 100,
              "top": 85
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto20",
        "calle":"Los fresnos",
        "numero":"4130000",
        "latitud":"-36,847141",
        "longitud":"-73,104942",
        "residuos":"Latas, Papeles, Carton",
        "administracion":"Municipalidad San pedro de la paz",
        "comuna":"San Pedro",
        "itemImg": {
          "type": "text",
          "title": "Los fresnos 4130000",
          "description": "Latas, Papeles, Carton",
          "position": {
              "left": 65,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto21",
        "calle":"Av. Manuel Rodriguez",
        "numero":"1045",
        "latitud":"-36,93034",
        "longitud":"-73,021767",
        "residuos":"Carton, Papeles, Plasticos",
        "administracion":"Municipalidad Chiguayante",
        "comuna":"Chiguayante",
        "itemImg": {
          "type": "text",
          "title": "Av. Manuel Rodriguez 1045",
          "description": "Carton, Papeles, Plasticos",
          "position": {
              "left": 100,
              "top": 75
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto22",
        "calle":"Av. 8 Oriente",
        "numero":"720",
        "latitud":"-36,906445",
        "longitud":"-73,031436",
        "residuos":"Carton, Papeles, Plasticos",
        "administracion":"Municipalidad Chiguayante",
        "comuna":"Chiguayante",
        "itemImg": {
          "type": "text",
          "title": "Av. 8 Oriente 720",
          "description": "Carton, Papeles, Plasticos",
          "position": {
              "left": 35,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"punto23",
        "calle":"Av.Gnrl Prats",
        "numero":"80",
        "latitud":"-37,023102",
        "longitud":"-73,153526",
        "residuos":"Carton, Papeles, Plasticos",
        "administracion":"Municipalidad Coronel",
        "comuna":"Coronel",
        "itemImg": {
          "type": "text",
          "title": "Av.Gnrl Prats 80",
          "description": "Carton, Papeles, Plasticos",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      } 
    ],
    "gestoresDeResiduos":[
      {
        "nombre":"gestor1",
        "giro":"giro1",
        "telefono":"numero1",
        "email":"email@f.com",
        "direccionWeb":"www.hola.cl",
        "comuna":"Concepcion",
        "calle":"calle1",
        "numero":"1",
        "latitud":"-36,098994",
        "longitud":"-73,078909",
        "residuos":"Carton, Papeles, Plasticos, Aceite",
        "tipoEmpresa":"Certificada",
        "itemImg": {
          "type": "text",
          "title": "Gestor S.A, Certificada",
          "description": "Carton, Papeles, Plasticos, Aceite",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"Biobio Recicla",
        "giro":"giro1",
        "telefono":"numero1",
        "email":"email@f.com",
        "direccionWeb":"www.hola.cl",
        "comuna":"Talcahuano",
        "calle":"calle1",
        "numero":"255",
        "latitud":"-36,098994",
        "longitud":"-73,078909",
        "residuos":"Electrónica, Plasticos",
        "tipoEmpresa":"Certificada",
        "itemImg": {
          "type": "text",
          "title": "Biobio Recicla, Certificada",
          "description": "Electrónica, Plásticos",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"gestor2",
        "giro":"giro2",
        "telefono":"numero2",
        "email":"email@f2.com",
        "direccionWeb":"www.hola2.cl",
        "comuna":"San Pedro",
        "calle":"calle2",
        "numero":"2",
        "latitud":"-36,098994",
        "longitud":"-73,078909",
        "residuos":"Neumáticos, Pilas, Escombros",
        "tipoEmpresa":"Certificada",
        "itemImg": {
          "type": "text",
          "title": "Gestorsitos S.A, Certificada",
          "description": "Neumáticos, Pilas, Escombros",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"gestor3",
        "giro":"giro3",
        "telefono":"numero3",
        "email":"email@f3.com",
        "direccionWeb":"www.hola3.cl",
        "comuna":"Chiguayante",
        "calle":"calle3",
        "numero":"3",
        "latitud":"-36,098994",
        "longitud":"-73,078909",
        "residuos":"Madera, Papel, Textiles",
        "tipoEmpresa":"Certificada",
        "itemImg": {
          "type": "text",
          "title": "Gestortotes S.A, Certificada",
          "description": "Madera, Papel, Textiles",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      },
      {
        "nombre":"gestor4",
        "giro":"giro4",
        "telefono":"numero4",
        "email":"email@f4.com",
        "direccionWeb":"www.hola4.cl",
        "comuna":"Coronel",
        "calle":"calle4",
        "numero":"4",
        "latitud":"-36,098994",
        "longitud":"-73,078909",
        "residuos":"Orgánicos, Metales, Escombros",
        "tipoEmpresa":"Certificada",
        "itemImg": {
          "type": "text",
          "title": "Gestorsaurios S.A, Certificada",
          "description": "Orgánicos, Metales, Escombros",
          "position": {
              "left": 100,
              "top": 100
          },
          "sticky": false,
          "customClassName": "interactive-item"
        }
      }
    ],
    "chiguayanteimg": "http://127.0.0.1:8000/imgs/infografias/chiguayante.png",
    "concepcionimg": "http://127.0.0.1:8000/imgs/infografias/concepcion.png",
    "talcahuanoimg": "http://127.0.0.1:8000/imgs/infografias/talcahuano.png",
    "sanpedroimg": "http://127.0.0.1:8000/imgs/infografias/sanpedro.png",
    "coronelimg": "http://127.0.0.1:8000/imgs/infografias/coronel.png",
    "comunaToImg": {
      "Concepción": "{concepcionimg}",
      "Talcahuano": "{talcahuanoimg}",
      "San Pedro": "{sanpedroimg}",
      "Coronel": "{coronelimg}",
      "Chiguayante": "{chiguayanteimg}"
    }
  },
  "responses": {
    "start": {
      "type": "Question",
      "text": "Cuál es su nombre?",
      "saveKey": "name",
      "nextResponse": {
        "type": "BotReply",
        "text": "Mucho gusto {name}",
        "nextResponse": "businessQuestion"
      }
    },
    "businessQuestion": {
      "type": "BotResponse",
      "text": "Es usted una persona o representa una empresa?",
      "buttons": [
        {
          "text": "Persona",
          "nextResponse": "preguntasNatural"
        },
        {
          "text": "Empresa",
          "nextResponse": {
            "type": "BotResponse",
            "text": "{name}, esta usted de acuerdo con que nos proporcione su número de teléfono y email para que podamos contactarlo para una atención mas personalizada?",
            "buttons": [
              {
                "text": "Si, me parece bien",
                "nextResponse": "phoneQuestion",
                "keywords": [
                  "Ok",
                  "Ya",
                  "Está bien",
                  "No hay problema",
                  "Si",
                  "Afirmativo",
                  "Bueno"
                ]
              },
              {
                "text": "No estoy de acuerdo",
                "nextResponse": "preguntasEmpresa",
                "keywords": [
                  "No gracias",
                  "No",
                  "No quiero",
                  "No muchas gracias",
                  "Negativo"
                ]
              }
            ]
          },
          "keywords": [
            "tengo un negocio",
            "represento a una empresa",
            "Soy una persona"
          ]
        }
      ]
    },
    "phoneQuestion":{
      "type": "Question",
      "text": "Cuál es su número de teléfono?",
      "nextResponse": "emailQuestion",
      "validationRegex": "phone",
      "saveKey": "phone",
      "errorMessage": "El número debe estar en el formato de \"+56912345678\", intente de nuevo por favor"
    },
    "emailQuestion":{
      "type": "Question",
      "text": "Por último necesitamos su email",
      "nextResponse": "preguntasEmpresa",
      "validationRegex": "email",
      "saveKey": "email",
      "trySaveContactData": true,
      "errorMessage": "El email debe estar en el formato de \"tumail@dominio.com\", intente de nuevo por favor"
    },
    "preguntasNatural": {
      "type": "BotResponse",
      "text": "Bienvenido! Qué desea saber?",
      "autoRoot": true,
      "buttons": [
        {
          "text": "Ubicación de puntos limpios para reciclar",
          "nextResponse": "preguntaPuntosLimpios",
          "keywords":[
            "Puntos",
            "limpios"
          ]
        }
      ]
    },
    "preguntaPuntosLimpios":{
      "type": "BotResponse",
      "text": "¿En el punto limpio de que comuna desea dejar sus residuos?",
      "saveKey": "comuna",
      "buttons":[
        {
          "text": "Concepción",
          "nextResponse":"preguntaResiduos",
          "keywords":[
            "conce"
          ]
        },
        {
          "text":"Talcahuano",
          "nextResponse":"preguntaResiduos"
        },
        {
          "text": "San Pedro",
          "nextResponse":"preguntaResiduos",
          "keywords":[
            "san piter"
          ]
        },
        {
          "text": "Chiguayante",
          "nextResponse":"preguntaResiduos"
        },
        {
          "text": "Coronel",
          "nextResponse":"preguntaResiduos"
        }
      ]
    },
    "preguntaResiduos":{
      "type":"BotResponse",
      "text":"Qué tipo de residuo desea reciclar?",
      "saveKey": "residuo",
      "buttons":[
        {
          "text":"Plástico",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Aceite",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Escombros",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Textiles",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Metales",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Latas",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Papeles",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Carton",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Botellas PET",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Aceite Vegetal",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Tetrapak",
          "nextResponse":"findComunaResiduos"
        },
        {
          "text":"Vidrio",
          "nextResponse":"findComunaResiduos"
        }
      ]
    },
    "findComunaResiduos": {
      "type": "Function",
      "name": "getFromMap",
      "map": "comunaToImg",
      "find": "{comuna}",
      "result": "comunaImg",
      "nextResponse": {
        "type": "Function",
        "name": "where",
        "array": "puntosLimpios",
        "key": "residuos",
        "value": "{residuo}",
        "condition": "contains",
        "or": true,
        "result": "resultPuntosLimpios",
        "strict": false,
        "nextResponse": {
          "type": "Function",
          "name": "where",
          "array": "resultPuntosLimpios",
          "key": "comuna",
          "value": "{comuna}",
          "condition": "contains",
          "result": "lastresultPuntosLimpios",
          "strict": false,
          "nextResponse": {
            "type": "Function",
            "name": "count",
            "array": "lastresultPuntosLimpios",
            "result": "countResult",
            "nextResponse": {
              "type": "Function",
              "name": "if",
              "itemA": "{countResult}",
              "itemB": "0",
              "condition": ">",
              "then": {
                "type": "Function",
                "name": "map",
                "array": "lastresultPuntosLimpios",
                "get": "itemImg",
                "result": "mapItems",
                "nextResponse": {
                  "text": "Ok, aqui tiene puntos de la comuna de {comuna}, que reciclan {residuo}. Hay {countResult}",
                  "attachment": {
                    "type": "Image",
                    "url": "{comunaImg}"
                  },
                  "additionalParameters": {
                    "puntosLimpios": "{lastresultPuntosLimpios}",
                    "imgItems": "{mapItems}"
                  }
                }
              },
              "else": "No hay puntos limpios en la comuna de {comuna} que reciclen {residuo}",
              "nextResponse": {
                "type": "Function",
                "name": "clear",
                "variable": ["resultPuntosLimpios", "countResult", "lastresultPuntosLimpios", "comuna", "residuo", "mapItems"]
              }
            }
          }
        }
      }
    },
    "findGestorResiduos": {
      "type": "Function",
      "name": "getFromMap",
      "map": "comunaToImg",
      "find": "{comuna}",
      "result": "comunaImg",
      "nextResponse": {
        "type": "Function",
        "name": "where",
        "array": "gestoresDeResiduos",
        "key": "residuos",
        "value": "{residuo}",
        "condition": "contains",
        "or": true,
        "result": "resultGestorResiduo",
        "strict": false,
        "nextResponse": {
          "type": "Function",
          "name": "where",
          "array": "resultGestorResiduo",
          "key": "comuna",
          "value": "{comuna}",
          "condition": "contains",
          "result": "lastresultGestorResiduo",
          "strict": false,
          "nextResponse": {
            "type": "Function",
            "name": "count",
            "array": "lastresultGestorResiduo",
            "result": "countResult",
            "nextResponse": {
              "type": "Function",
              "name": "if",
              "itemA": "{countResult}",
              "itemB": "0",
              "condition": ">",
              "then": {
                "type": "Function",
                "name": "map",
                "array": "lastresultGestorResiduo",
                "get": "itemImg",
                "result": "mapItems",
                "nextResponse": {
                  "text": "Ok, aqui tiene gestores de la comuna de {comuna}, que reciclan {residuo}. Hay {countResult}",
                  "attachment": {
                    "type": "Image",
                    "url": "{comunaImg}"
                  },
                  "additionalParameters": {
                    "gestoresDeResiduos": "{lastresultGestorResiduo}",
                    "imgItems": "{mapItems}"
                  }
                }
              },
              "else": "No hay puntos limpios en la comuna de {comuna} que reciclen {residuo}",
              "nextResponse": {
                "type": "Function",
                "name": "clear",
                "variable": ["resultGestorResiduo", "countResult", "lastresultGestorResiduo", "comuna", "residuo", "mapItems"]
              }
            }
          }
        }
      }
    },
    "preguntasEmpresa":{
      "type": "BotResponse",
      "text": [
        "Bienvenido! Qué desea saber?",
        "Hola! Cómo lo puedo ayudar?",
        "En qué puedo ayudarlo?"
      ],
      "autoRoot": true,
      "botTypingSeconds": 1,
      "displayButtons": true,
      "buttons": [
        {
          "text": "¿En que consiste la empresa?",
          "nextResponse": {
            "type": "BotReply",
            "text": "Somos una empresa que busca mantener una relación armónica entre las personas, la sociedad y la naturaleza, para contribuir a una mejor calidad de vida."
          },
          "keywords": [
            "De qué trata la empresa?",
            "Quiero saber de qué trata la empresa"
          ]
        },
        {
          "text": "¿Qué tipo de servicios ofrecen?",
          "nextResponse": {
            "type": "BotReply",
            "text": "Brindamos soluciones ambientales, para la gestión integral de residuos."
          },
          "keywords": [
            "¿Qué ofrecen?",
            "¿Qué servicios ofrecen?",
            "¿Cuáles son los servicios que ofrecen?",
            "Quiero saber los tipos de servicios que tienen",
            "Quiero saber los tipos de servicios que ofrecen"
          ]
        },
        {
          "text": "Desea cotizar algun servicio que ofrecemos?",
          "nextResponse": {
            "type":"BotResponse",
            "text": "OK! Qué servicio desea cotizar?",
            "buttons": [
              {
                "text": "Gestión de residuos",
                "nextResponse": {
                  "type": "BotReply",
                  "text": "Ingrese a este link: https://biobiorecicla.cl/cotizacion-empresas-instituciones/",
                  "additionalParameters": {
                    "link": "https://biobiorecicla.cl/cotizacion-empresas-instituciones/"
                  }
                }
              },
              {
                "text": "Puntos limpios",
                "nextResponse": {
                  "type": "BotReply",
                  "text": "Ingrese a este link: https://biobiorecicla.cl/condominios-comunidades/",
                  "additionalParameters": {
                    "link": "https://biobiorecicla.cl/condominios-comunidades/"
                  }
                }
              },
              {
                "text": "Consultoría",
                "nextResponse": {
                  "type": "BotReply",
                  "text": "Ingrese a este link: https://biobiorecicla.cl/cotizacion-empresas-instituciones/",
                  "additionalParameters": {
                    "link": "https://biobiorecicla.cl/cotizacion-empresas-instituciones/"
                  }
                }
              },
              {
                "text": "Educación Ambiental",
                "nextResponse": {
                  "type": "BotReply",
                  "text": "Ingrese a este link: https://biobiorecicla.cl/condominios-comunidades/",
                  "additionalParameters": {
                    "link": "https://biobiorecicla.cl/condominios-comunidades/"
                  }
                }
              },
              {
                "text": "Biciclaje",
                "nextResponse": {
                  "type": "BotReply",
                  "text": "Ingrese a este link: https://biobiorecicla.cl/conciencia-ambiental/",
                  "additionalParameters": {
                    "link": "https://biobiorecicla.cl/conciencia-ambiental/"
                  }
                }
              }
            ]
          },
          "keywords": [
            "Quiero cotizar servicios",
            "Deseo cotizar servicios"
          ]
        },
        {
          "text":"Ubicación de empresas gestoras de residuos",
          "nextResponse":"preguntaComunaGestores",
          "keywords": [
            "Cuáles son las empresas gestoras de residuos",
            "Qué empresas gestionan residuos",
            "Cuál es la ubicación de empresas gestoras de residuos",
            "Busco empresas gestores de residuos",
            "Quiero saber la ubicación de gestores de residuos",
            "Busco gestores de residuos",
            "Quiero saber las ubicaciones de empresas",
            "Ubicaciones de gestores de residuos",
            "ubicaciones",
            "Donde hay gestores de residuos",
            "Busco empresas que reciclen",
            "Busco empresas cercanas que reciclen residuos"
          ]
        }
      ]
    },
    "preguntaComunaGestores":{
      "type": "BotResponse",
      "text": "¿En el punto limpio de que comuna desea dejar sus residuos?",
      "saveKey":"comuna",
      "buttons":[
        {
          "text": "Concepción",
          "nextResponse":"preguntaResiduosGestores"
        },
        {
          "text":"Talcahuano",
          "nextResponse":"preguntaResiduosGestores"
        },
        {
          "text": "San Pedro",
          "nextResponse":"preguntaResiduosGestores"
        },
        {
          "text": "Chiguayante",
          "nextResponse":"preguntaResiduosGestores"
        },
        {
          "text": "Coronel",
          "nextResponse":"preguntaResiduosGestores"
        }
      ]
    },
    "preguntaResiduosGestores":{
      "type":"BotResponse",
      "text":"Qué tipo de residuo desea reciclar?",
      "saveKey":"residuo",
      "buttons":[
        {
          "text":"Aceite",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Pilas",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Neumáticos",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Plásticos",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Electrónica",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Madera",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Papel",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Carton",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Escombros",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Textiles",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Orgánicos",
          "nextResponse":"findGestorResiduos"
        },
        {
          "text":"Metales",
          "nextResponse":"findGestorResiduos"
        }
      ]
    }
  }
}